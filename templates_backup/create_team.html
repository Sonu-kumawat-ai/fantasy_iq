<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Team - Fantasy IQ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/create_team.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">
    <script>
        // Pass contest ID to JavaScript
        const contestId = "{{ contest_id }}";
    </script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <a href="/" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Fantasy IQ Logo" class="logo-img" onerror="this.style.display='none'">
                    <h1>Fantasy <span>IQ</span> <span class="welcome-text" id="welcomeText"></span></h1>
                </a>
            </div>
            
            <!-- Hamburger Menu Button -->
            <button class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="nav-links" id="navLinks">
                <a href="/home">Home</a>
                <a href="/contests">Contests</a>
                <a href="/about">About</a>
                <div class="user-info">
                    <div class="profile-dropdown">
                        <a href="#" class="profile-icon" title="Profile">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </a>
                        <div class="dropdown-menu">
                            <a href="/profile" class="dropdown-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                My Profile
                            </a>
                            <a href="/wallet" class="dropdown-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                    <line x1="1" y1="10" x2="23" y2="10"></line>
                                </svg>
                                My Wallet
                                <span class="wallet-badge" id="walletBadge">₹0</span>
                            </a>
                            <a href="/joined-contests" class="dropdown-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 11l3 3L22 4"></path>
                                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                                </svg>
                                Joined Contests
                            </a>
                            <a href="/logout" class="dropdown-item logout-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Team Creation Section -->
    <section class="team-creation-section">
        <div class="container">
            <!-- Header -->
            <div class="team-header">
                <h1 id="contestTitle">Create Your Team</h1>
                <div class="team-info">
                    <span id="playersSelected">Players: <strong>0/11</strong></span>
                </div>
            </div>

            <!-- Main Layout: Players Left, Team Right -->
            <div class="team-builder-layout">
                <!-- Players List (Left Side) -->
                <div class="players-section">
                    <div class="filter-tabs">
                        <!-- Filter tabs will be dynamically generated based on sport type -->
                    </div>

                    <div class="players-grid" id="playersGrid">
                        <div class="loading">Loading players...</div>
                    </div>
                </div>

                <!-- Team Preview (Right Side) -->
                <div class="team-preview">
                    <h3>Your Team (<span id="teamCount">0</span>/11)</h3>
                    <div class="selected-players" id="selectedPlayers">
                        <p class="empty-state">Select 11 players to create your team</p>
                    </div>
                    <div class="captain-selection">
                        <p><strong>Captain:</strong> <span id="captainName">Not selected</span></p>
                        <p><strong>Vice-Captain:</strong> <span id="viceCaptainName">Not selected</span></p>
                    </div>
                    <button class="btn-submit-team" id="submitTeamBtn" disabled onclick="submitTeam()">
                        Submit Team
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>Fantasy IQ</h3>
                <p>India's Most Trusted Fantasy Sports Platform</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="#">About Us</a>
                <a href="#">How to Play</a>
                <a href="#">Terms & Conditions</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="#">Help Center</a>
                <a href="#">Contact Us</a>
                <a href="#">Privacy Policy</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Fantasy IQ. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const hamburger = document.getElementById('hamburger');
            navLinks.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // Update wallet balance
        async function updateWalletBalance() {
            try {
                const response = await fetch('/get-wallet-balance');
                const data = await response.json();
                if (data.success) {
                    document.getElementById('walletBadge').textContent = `₹${data.balance}`;
                }
            } catch (error) {
                console.error('Error fetching wallet balance:', error);
            }
        }

        // Call on page load
        updateWalletBalance();
    </script>
    <script src="{{ url_for('static', filename='js/create_team.js') }}"></script>
</body>
</html>
